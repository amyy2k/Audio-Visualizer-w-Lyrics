<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Wireframe Audio Visualizer</title>
  <link href="https://fonts.googleapis.com/css2?family=Quantico&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: black;
      font-family: 'Quantico', sans-serif;
      letter-spacing: 1px;
      color: white;
    }

    #controls {
      position: fixed;
      top: 10px;
      left: 10px;
      z-index: 10;
      display: flex;
      gap: 10px;
      align-items: center;
    }

    #playPauseBtn {
      background: transparent;
      color: white;
      border: none;
      padding: 6px 12px;
      font-size: 18px;
      cursor: pointer;
      transition: background 0.3s, color 0.3s;
    }

    #playPauseBtn:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    #trackSelect {
      background: black;
      color: white;
      border: 1px solid white;
      padding: 6px 8px;
      font-size: 14px;
      font-family: 'Quantico', sans-serif;
    }

    #seekBar {
      width: 200px;
      height: 6px;
      appearance: none;
      background: white;
      cursor: pointer;
    }

    #seekBar::-webkit-slider-thumb,
    #seekBar::-moz-range-thumb {
      height: 14px;
      width: 14px;
      background: white;
      border-radius: 50%;
      border: none;
    }

    #addTrackBtn {
      background: transparent;
      color: white;
      border: none;
      font-size: 22px;
      padding: 4px 12px;
      cursor: pointer;
      font-family: 'Quantico', sans-serif;
      transition: background 0.2s ease;
    }

    #addTrackBtn:hover {
      background: rgba(255, 255, 255, 0.2);
    }
  </style>
</head>

<body>
  <div id="controls">
    <button id="addTrackBtn">+</button>
    <select id="trackSelect">
      <option value="Cynthoni - Dork After Dark.mp3">Cynthoni - Dork After Dark</option>
      <option value="Cynthoni - Lychee Ice.mp3">Cynthoni - Lychee Ice</option>
      <option value="Joji - Die For You.mp3">Joji - Die For You</option>
      <option value="Porter Robinson - Sad Machine.mp3">Porter Robinson - Sad Machine</option>
      <option value="Radiohead - All I Need.mp3">Radiohead - All I Need</option>
    </select>
    <button id="playPauseBtn">â–¶</button>
    <input type="range" id="seekBar" value="0" min="0" max="100" step="0.1">
    <input type="file" id="fileInput" accept="audio/*" style="display: none;">
  </div>

  <audio id="audio"></audio>

  <script type="importmap">
    {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.module.js"
      }
    }
  </script>

  <script type="module">
    import * as THREE from 'three';

    let scene, camera, renderer, terrain, analyser, dataArray;
    const audio = document.getElementById('audio');
    const playPauseBtn = document.getElementById("playPauseBtn");
    const trackSelect = document.getElementById("trackSelect");
    const seekBar = document.getElementById("seekBar");

    const cols = 64, rows = 64, terrainWidth = 300, terrainDepth = 800;
    const geometry = new THREE.PlaneGeometry(terrainWidth, terrainDepth, cols - 1, rows - 1);
    geometry.rotateX(-Math.PI / 2);

    const material = new THREE.MeshBasicMaterial({ color: 0xffffff, wireframe: true });
    terrain = new THREE.Mesh(geometry, material);

    // Create sphere and glow
    const sphereGeometry = new THREE.SphereGeometry(10, 32, 32);
    const sphereMaterial = new THREE.MeshBasicMaterial({ color: 0x00ffff });
    const sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);
    sphere.position.set(0, 30, 0);

    const glow = new THREE.PointLight(0x00ffff, 2, 150);
    glow.position.copy(sphere.position);

    init();
